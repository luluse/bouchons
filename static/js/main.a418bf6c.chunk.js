(this.webpackJsonpbouchons=this.webpackJsonpbouchons||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var s,c=n(2),a=n.n(c),r=n(84),o=n.n(r),d=n(112),i=n(41),l=n(27),b=n(34),j=n(37),u=n(36),h=(n(97),n(6)),x=Object(j.a)(s||(s=Object(l.a)(["\nmutation DeletePost($id: uuid!) {\n  delete_posts(where: {id: {_eq: $id}}) {\n    affected_rows\n  }\n}\n"])));var O,p,m,f,g=function(e){var t=e.post,n=e.refetch,s=Object(d.useMutation)(x,{onCompleted:function(){return n()}}),c=Object(u.a)(s,1)[0];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("table",{className:"w-full text-sm",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{className:"tr",children:[Object(h.jsx)("td",{className:"td",children:"id"}),Object(h.jsx)("td",{className:"p-3",children:t.id})]}),Object(h.jsxs)("tr",{className:"tr",children:[Object(h.jsx)("td",{className:"td",children:"title"}),Object(h.jsx)("td",{className:"p-3",children:t.title})]}),Object(h.jsxs)("tr",{className:"tr",children:[Object(h.jsx)("td",{className:"td",children:"body"}),Object(h.jsx)("td",{className:"p-3",children:t.body})]}),Object(h.jsxs)("tr",{className:"tr",children:[Object(h.jsx)("td",{className:"td",children:"createdAt"}),Object(h.jsx)("td",{className:"p-3",children:t.createdAt})]})]})})}),Object(h.jsx)("nav",{className:"nav",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{className:"li",children:Object(h.jsx)(b.b,{to:"/edit/".concat(t.id),className:"edit",children:"Edit"})}),Object(h.jsx)("li",{className:"li",children:Object(h.jsx)("button",{onClick:function(){return e=t.id,void(window.confirm("Are you sure you want to delete this post?")&&c({variables:{id:e}}));var e},className:"delete",children:"Delete"})})]})})]})},v=n(59),y=v.a.h2(O||(O=Object(l.a)(["\nfont-weight: bold;\ncolor: #fff; \njustify-self: start;\nalign-self: center;\n"]))),N=v.a.button(p||(p=Object(l.a)(["\njustify-self: end;\nalign-self: center;\nfont-size: 20px;\ntransition: 1s;\nbackground: #222;\ntransition: #EE3769 0.5s 0.3s ease-out;\nborder: none;\n\na{\n  padding: 10px 30px;\n  border-radius: 30px;\n  border: solid 1px #EE3769;\n  color: #EE3769;\n  text-decoration: none;\n\n  &:hover {\n    color: #fff;\n    border: solid 1px #fff;\n    }\n  }\n  \n&:hover{\n  transform: translateY(-3px);\n}\n"]))),w=v.a.div(m||(m=Object(l.a)(["\ndisplay: grid;\ngrid-template-columns: repeat(2, 1fr);\ngrid-gap: 20px;\npadding: 10px 20px;\nbackground: #222;\n"])));function $(){return Object(h.jsxs)("div",{className:"text-center",children:["No posts yet. ",Object(h.jsx)(b.b,{to:"/new",children:"Create one?"})]})}var S=Object(j.a)(f||(f=Object(l.a)(["{\n      posts {\n          id\n          body\n          title\n          createdAt\n          }\n        }\n"])));var _=function(){var e=Object(d.useQuery)(S,{fetchPolicy:"network-only"}),t=e.loading,n=e.data,s=e.refetch;return t?Object(h.jsx)("div",{children:"Loading..."}):(console.log(n),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(w,{children:[Object(h.jsx)(y,{children:"All Posts"}),Object(h.jsx)(N,{children:Object(h.jsx)(b.b,{to:"/new",children:"New Post"})})]}),0===n.posts.length&&Object(h.jsx)($,{}),n.posts.map((function(e){return Object(h.jsx)(g,{post:e,refetch:s},e.id)}))]}))},E="w-full max-w-md",k="text-sm block font-bold  pb-2",P="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline border-blue-300",C="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",A="px-8 py-8 pt-8",q="px-4 pb-4",M="font-bold text-red-500";var D,B=function(e){var t=e.onSave,n=e.post,s=e.loading,c=e.error,r=a.a.useState(null===n||void 0===n?void 0:n.title),o=Object(u.a)(r,2),d=o[0],i=o[1],l=a.a.useState(null===n||void 0===n?void 0:n.body),b=Object(u.a)(l,2),j=b[0],x=b[1];return Object(h.jsx)("div",{className:E,children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:d,body:j})},className:A,children:[Object(h.jsxs)("div",{className:q,children:[Object(h.jsx)("label",{className:k,children:"Title"}),Object(h.jsx)("input",{required:!0,name:"title",placeholder:"Enter your post title",className:P,onChange:function(e){return i(e.target.value)},defaultValue:d})]}),Object(h.jsxs)("div",{className:q,children:[Object(h.jsx)("label",{className:k,children:"Body"}),Object(h.jsx)("textarea",{required:!0,name:"body",className:P,placeholder:"Enter your post content",onChange:function(e){return x(e.target.value)},defaultValue:j})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{disabled:s,className:C,type:"submit",children:"Submit"})}),c&&Object(h.jsx)("p",{className:M,children:c.message})]})})},F=n(11),J=Object(j.a)(D||(D=Object(l.a)(["\nmutation CreatePost($title: String!, $body: String!) {\n  insert_posts(objects: {body: $body, title: $title}) {\n    affected_rows\n  }\n}\n"])));var L,Q,V=function(){var e=Object(F.f)(),t=Object(d.useMutation)(J,{onCompleted:function(){return e.push("/")}}),n=Object(u.a)(t,2),s=n[0],c=n[1],a=c.loading,r=c.error;return Object(h.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[Object(h.jsx)("header",{className:"bg-gray-300 text-gray-700 py-3 px-4",children:Object(h.jsx)("h2",{className:"text-sm font-semibold",children:"New Post"})}),Object(h.jsx)("div",{className:"bg-gray-100 p-4",children:Object(h.jsx)(B,{onSave:function(e){var t=e.title,n=e.body;s({variables:{title:t,body:n}})},loading:a,error:r})})]})},z="bg-white border rounded-lg overflow-hidden",G="bg-gray-300 text-gray-700 py-3 px-4",I="text-sm font-semibold",T=Object(j.a)(L||(L=Object(l.a)(["\n query GetPosts($id: uuid!) {\n  posts_by_pk(id: $id) {\n    body\n    createdAt\n    id\n    title\n  }\n}"]))),U=Object(j.a)(Q||(Q=Object(l.a)(["\nmutation UpdatePost($id: uuid!, $body: String!, $title: String!) {\n  update_posts(where: {id: {_eq: $id}}, _set: {body: $body, title: $title}) {\n    returning {\n      title\n      body\n    }\n  }\n}\n"])));var Y=function(){var e=Object(F.f)(),t=Object(F.g)().id,n=Object(d.useQuery)(T,{variables:{id:t}}),s=n.loading,c=n.data,a=Object(d.useMutation)(U,{onCompleted:function(){return e.push("/")}}),r=Object(u.a)(a,2),o=r[0],i=r[1],l=i.loading,b=i.error;return s?Object(h.jsx)("div",{children:"Loading..."}):Object(h.jsxs)("div",{className:z,children:[Object(h.jsx)("header",{className:G,children:Object(h.jsx)("h2",{className:I,children:"Edit Post"})}),Object(h.jsx)(B,{post:c.posts_by_pk,onSave:function(e){var n=e.title,s=e.body;o({variables:{title:n,body:s,id:t}})},loading:l,error:b})]})},H=new i.a({uri:"https://bouchons.herokuapp.com/v1/graphql"}),K=document.getElementById("root");o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(d.ApolloProvider,{client:H,children:Object(h.jsx)(b.a,{children:Object(h.jsxs)(F.c,{children:[Object(h.jsx)(F.a,{exact:!0,path:"/",component:_}),Object(h.jsx)(F.a,{exact:!0,path:"/new",component:V}),Object(h.jsx)(F.a,{exact:!0,path:"/edit/:id",component:Y})]})})})}),K)},97:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.a418bf6c.chunk.js.map